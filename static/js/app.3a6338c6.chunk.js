(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{253:function(e,t,n){"use strict";n.d(t,"a",(function(){return ne}));var r=n(15),a=n.n(r),o=n(6),c=n.n(o),l=n(14),s=n.n(l),i=n(0),u=n.n(i),f=n(8),g=n(82),d=n(4),m=n(2),b=n(144),p=n(96),h=n(437),y=n(224),S=n(436),E=n(438),O="#ccc",v="#2f95dc";function k(e){return i.createElement(h.a,{name:e.name,size:30,style:{marginBottom:-3},color:e.focused?v:O})}var w=n(18),x=n(70),j=n(60),C="ws://192.168.1.29:3000/";function P(e){var t=e.name,n=e.state,r=n.on,a=n.bri;return u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",flexDirection:"row"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,null,t)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:r?{backgroundColor:"green"}:{backgroundColor:"red"}},r?"true":"false")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,null,Math.round(100*a/255,2),"%")))}P.navigationOptions={header:null};d.a.create({container:{flex:1,backgroundColor:"#fff"},contentContainer:{paddingTop:30}});function T(){var e=Object(i.useState)([]),t=s()(e,2),n=t[0],r=t[1],a=Object(i.useState)([]),o=s()(a,2),c=o[0],l=o[1],f=Object(j.useSocketIO)(C,{onOpen:function(){return console.log("opened Lights")},share:function(){return!0},shouldReconnect:function(e){return!0},onError:function(e){return console.error},onClose:function(e){return console.log},onMessage:function(e){var t=JSON.parse(e.data);"answer"==t.event&&"lights"==t.sensor&&(console.log(t.state),r(t.state))}}),g=f.sendJsonMessage;f.lastJsonMessage,f.readyState,f.getWebSocket;return Object(i.useEffect)((function(){return g({event:"ask",sensor:"universe",state:"lights"})}),[]),Object(i.useEffect)((function(){var e=[];n.map((function(t){e.push(u.a.createElement(P,{key:t.id,name:t.nalme,state:t.state}))})),l(e)}),[n]),u.a.createElement(m.a,{style:H.container},u.a.createElement(x.b,{style:H.container,contentContainerStyle:H.contentContainer},u.a.createElement(m.a,{style:{flex:1,width:"100%",alignItems:"center",justifyContent:"center"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",flexDirection:"row"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,null,"Nom")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,null,"On")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,null,"Power"))),c)))}T.navigationOptions={header:null};var H=d.a.create({container:{flex:1,backgroundColor:"#fff"},contentContainer:{paddingTop:30}}),I=n(24),D=n.n(I);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var B=function(){var e=Object(i.useState)([]),t=s()(e,2),n=t[0],r=t[1],a=Object(j.useSocketIO)(C,{onOpen:function(){return console.log("opened StatusBar")},shouldReconnect:function(e){return!0},share:function(){return!0},onError:function(e){return console.error},onClose:function(e){return console.log},onMessage:function(e){var t=JSON.parse(e.data);switch(t.event){case"heartbeat":var a=Math.floor(t.time/1e3);r([{name:t.macAddress,time:Math.floor(a/60)+"min "+a%60+"s"}].concat(D()(n.filter((function(e){return e.name!==t.macAddress})))));break;case"button":case"ask":case"answer":break;default:console.warn("Unknown event",t.event)}}});a.sendJsonMessage,a.lastJsonMessage,a.readyState,a.getWebSocket;return u.a.createElement(m.a,{style:A.tabBarInfoContainer},n.map((function(e){return u.a.createElement(w.a,{style:A.tabBarInfoText,key:e.name},e.name,":",e.time)})))},A=d.a.create({tabBarInfoContainer:M(M({position:"absolute",bottom:0,left:0,right:0},f.a.select({ios:{shadowColor:"black",shadowOffset:{width:0,height:-3},shadowOpacity:.1,shadowRadius:3},android:{elevation:20}})),{},{alignItems:"center",backgroundColor:"#fbfbfb",paddingVertical:20}),tabBarInfoText:{fontSize:17,color:"rgba(96,100,109, 1)",textAlign:"center"}}),R=n(121);function J(e){var t=Object(i.useState)(null),n=s()(t,2);n[0],n[1];return u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(R.a,{title:"Press me",onPress:function(){e.send({event:"button",sensor:e.sensor,state:"on",time:Date.now()}),e.send({event:"button",sensor:e.sensor,state:"off",time:Date.now()})}}))}function W(e){var t=Object(i.useState)(null),n=s()(t,2),r=(n[0],n[1],Object(j.useSocketIO)(C,{onOpen:function(){return console.log("opened Buttons")},share:function(){return!0},shouldReconnect:function(e){return!0},onError:function(e){return console.error},onClose:function(e){return console.log}})),a=r.sendJsonMessage;r.lastJsonMessage,r.readyState,r.getWebSocket;return u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",flexDirection:"row"}},u.a.createElement(J,{send:a,sensor:"red"}),u.a.createElement(J,{send:a,sensor:"blue"}),u.a.createElement(J,{send:a,sensor:"green"}),u.a.createElement(J,{send:a,sensor:"black"}),u.a.createElement(J,{send:a,sensor:"white"}),u.a.createElement(J,{send:a,sensor:"yellow"}))}n(17);function L(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(){var e=Object(i.useState)("off"),t=s()(e,2),n=t[0],r=t[1],a=Object(i.useState)("off"),o=s()(a,2),c=o[0],l=o[1],f=Object(i.useState)("off"),g=s()(f,2),d=g[0],b=g[1],p=Object(i.useState)("off"),h=s()(p,2),y=h[0],S=h[1],E=Object(i.useState)("off"),O=s()(E,2),v=O[0],k=O[1],P=Object(i.useState)("off"),H=s()(P,2),I=H[0],D=H[1],z=Object(j.useSocketIO)(C,{onOpen:function(){return console.log("opened HomeScreen")},share:function(){return!0},shouldReconnect:function(e){return!0},onError:function(e){return console.error},onClose:function(e){return console.log},onMessage:function(e){var t=JSON.parse(e.data);switch(t.event){case"button":switch(t.sensor){case"red":r(t.state);break;case"blue":l(t.state);break;case"green":b(t.state);break;case"black":k(t.state);break;case"white":S(t.state);break;case"yellow":D(t.state);break;default:console.warn("Unknown sensor",t.sensor)}break;case"heartbeat":case"ask":case"answer":break;default:console.warn("Unknown event",t.event)}}});z.sendJsonMessage,z.lastJsonMessage,z.readyState,z.getWebSocket;return u.a.createElement(m.a,{style:V.container},u.a.createElement(x.b,{style:V.container,contentContainerStyle:V.contentContainer},u.a.createElement(m.a,{style:V.getStartedContainer},u.a.createElement(m.a,{style:{flex:1,width:"100%",alignItems:"center",justifyContent:"center"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",flexDirection:"row"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"red"}},u.a.createElement(w.a,{style:V.getStartedText},"Red")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"blue"}},u.a.createElement(w.a,{style:V.getStartedText},"Blue")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"green"}},u.a.createElement(w.a,{style:V.getStartedText},"Green")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"black"}},u.a.createElement(w.a,{style:V.getStartedText},"Black")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"white"}},u.a.createElement(w.a,{style:V.getStartedText},"White")),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",backgroundColor:"yellow"}},u.a.createElement(w.a,{style:V.getStartedText},"Yellow"))),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch",flexDirection:"row"}},u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===n?"green":"red"}},n)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===c?"green":"red"}},c)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===d?"green":"red"}},d)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===v?"green":"red"}},v)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===y?"green":"red"}},y)),u.a.createElement(m.a,{style:{flex:1,alignSelf:"stretch"}},u.a.createElement(w.a,{style:{fontSize:17,lineHeight:24,textAlign:"center",backgroundColor:"on"===I?"green":"red"}},I))),u.a.createElement(W,null))),u.a.createElement(T,null)),u.a.createElement(B,null))}U.navigationOptions={header:null};var V=d.a.create({container:{flex:1,backgroundColor:"#fff"},developmentModeText:{marginBottom:20,color:"rgba(0,0,0,0.4)",fontSize:14,lineHeight:19,textAlign:"center"},contentContainer:{paddingTop:30},welcomeContainer:{alignItems:"center",marginTop:10,marginBottom:20},welcomeImage:{width:100,height:80,resizeMode:"contain",marginTop:3,marginLeft:-10},getStartedContainer:{alignItems:"center",marginHorizontal:50},homeScreenFilename:{marginVertical:7},codeHighlightText:{color:"rgba(96,100,109, 0.8)"},codeHighlightContainer:{backgroundColor:"rgba(0,0,0,0.05)",borderRadius:3,paddingHorizontal:4},getStartedText:{fontSize:17,color:"rgba(96,100,109, 1)",lineHeight:24,textAlign:"center"},tabBarInfoContainer:N(N({position:"absolute",bottom:0,left:0,right:0},f.a.select({ios:{shadowColor:"black",shadowOffset:{width:0,height:-3},shadowOpacity:.1,shadowRadius:3},android:{elevation:20}})),{},{alignItems:"center",backgroundColor:"#fbfbfb",paddingVertical:20}),tabBarInfoText:{fontSize:17,color:"rgba(96,100,109, 1)",textAlign:"center"},navigationFilename:{marginTop:5},helpContainer:{marginTop:15,alignItems:"center"},helpLink:{paddingVertical:15},helpLinkText:{fontSize:14,color:"#2e78b7"}}),G=n(81);function F(){return i.createElement(x.b,{style:q.container,contentContainerStyle:q.contentContainer},i.createElement(Y,{icon:"md-speedometer",label:"See the client GitHub repository",onPress:function(){return G.a("https://github.com/cesar-richard/universe-client")}}),i.createElement(Y,{icon:"md-cog",label:"See the server GitHub repository",onPress:function(){return G.a("https://github.com/cesar-richard/universe")}}),i.createElement(Y,{icon:"md-bug",label:"See the NodeMCU GitHub repository",onPress:function(){return G.a("https://github.com/cesar-richard/universe")}}))}function Y(e){var t=e.icon,n=e.label,r=e.onPress,a=e.isLastOption;return i.createElement(x.a,{style:[q.option,a&&q.lastOption],onPress:r},i.createElement(m.a,{style:{flexDirection:"row"}},i.createElement(m.a,{style:q.optionIconContainer},i.createElement(h.a,{name:t,size:22,color:"rgba(0,0,0,0.35)"})),i.createElement(m.a,{style:q.optionTextContainer},i.createElement(w.a,{style:q.optionText},n))))}var q=d.a.create({container:{flex:1,backgroundColor:"#fafafa"},contentContainer:{paddingTop:15},optionIconContainer:{marginRight:12},option:{backgroundColor:"#fdfdfd",paddingHorizontal:15,paddingVertical:15,borderWidth:d.a.hairlineWidth,borderBottomWidth:0,borderColor:"#ededed"},lastOption:{borderBottomWidth:d.a.hairlineWidth},optionText:{fontSize:15,alignSelf:"flex-start",marginTop:1}}),K=Object(E.a)();function Q(e){var t=e.navigation,n=e.route;return t.setOptions({headerTitle:X(n)}),i.createElement(K.Navigator,{initialRouteName:"Home"},i.createElement(K.Screen,{name:"Home",component:U,options:{title:"Control",tabBarIcon:function(e){var t=e.focused;return i.createElement(k,{focused:t,name:"md-code-working"})}}}),i.createElement(K.Screen,{name:"Links",component:F,options:{title:"About",tabBarIcon:function(e){var t=e.focused;return i.createElement(k,{focused:t,name:"md-book"})}}}))}function X(e){var t,n,r;switch(null!=(t=null==(n=e.state)||null==(r=n.routes[e.state.index])?void 0:r.name)?t:"Home"){case"Home":return"Control";case"Links":return"Links to learn more"}}var Z=n(124),$=n(223);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){c()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var te=Object(S.a)();function ne(e){var t=i.useState(!1),r=s()(t,2),o=r[0],c=r[1],l=i.useState(),u=s()(l,2),d=u[0],S=u[1],E=i.useRef(),O=function(e){return Object(Z.a)(e,{prefixes:[$.a.makeUrl("/")],config:{Root:{path:"root",screens:{Home:"home",Links:"links",Settings:"settings"}}}})}(E).getInitialState;return i.useEffect((function(){a.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,b.a.preventAutoHide(),e.t0=S,e.next=5,a.a.awrap(O());case 5:return e.t1=e.sent,(0,e.t0)(e.t1),e.next=9,a.a.awrap(p.b(ee({},h.a.font,{"space-mono":n(422)})));case 9:e.next=14;break;case 11:e.prev=11,e.t2=e.catch(0),console.warn(e.t2);case 14:return e.prev=14,c(!0),b.a.hide(),e.finish(14);case 18:case"end":return e.stop()}}),null,null,[[0,11,14,18]],Promise)}),[]),o||e.skipLoadingScreen?i.createElement(m.a,{style:re.container},"ios"===f.a.OS&&i.createElement(g.a,{barStyle:"default"}),i.createElement(y.a,{ref:E,initialState:d},i.createElement(te.Navigator,null,i.createElement(te.Screen,{name:"Root",component:Q})))):null}var re=d.a.create({container:{flex:1,backgroundColor:"#fff"}})},266:function(e,t,n){n(267),e.exports=n(268)},267:function(e,t){"serviceWorker"in navigator&&window.addEventListener("load",(function(){navigator.serviceWorker.register("/universe-client/expo-service-worker.js",{scope:"/universe-client/"}).then((function(e){})).catch((function(e){console.info("Failed to register service-worker",e)}))}))},422:function(e,t,n){e.exports=n.p+"./fonts/SpaceMono-Regular.ttf"}},[[266,1,2]]]);
//# sourceMappingURL=app.3a6338c6.chunk.js.map